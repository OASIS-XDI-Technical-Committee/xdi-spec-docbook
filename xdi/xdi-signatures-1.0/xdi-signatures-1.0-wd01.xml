<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- 
For use when a committee document points at the OASIS web site for publishing:
<?xml-stylesheet type="text/xsl" 
href="http://docs.oasis-open.org/templates/DocBook/spec-0.6/stylesheets/oasis-specification-html.xsl"?>
<!DOCTYPE article
  PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
         "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" 

For use when a committee document points to an embedded runtime installation:
<?xml-stylesheet type="text/xsl" 
         href="htmlruntime/spec-0.6/stylesheets/oasis-specification-html.xsl"?>
<!DOCTYPE article
 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" 
        "htmlruntime/spec-0.6/docbook/docbookx.dtd" 

For use when a committee document is published in a local environment only
(note the instructions for local publishing require adjusting the stylesheet
 and DocBook directories in these declarations):
<?xml-stylesheet type="text/xsl" 
href="file:///c:/oasis/spec-0.6/stylesheets/oasis-specification-html-offline.xsl"?>
<!DOCTYPE article
  PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
         "file:///c:/oasis/spec-0.6/docbook/docbookx.dtd" 
-->
<?xml-stylesheet type="text/xsl" href="../../htmlruntime/spec-0.6/stylesheets/oasis-specification-html-offline.xsl"?>
<!DOCTYPE article
  PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
         "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" 
[
<!ENTITY name "oasis-specification">
<!ENTITY pversion "0.0">
<!ENTITY version "1.0">
<!ENTITY stage "wd01">
<!ENTITY standard "Working Draft 01">
<!ENTITY this-loc "http://docs.oasis-open.org/templates/DocBook/spec-&version;">
<!ENTITY previous-loc "http://docs.oasis-open.org/templates/DocBook/spec-&pversion;">
<!ENTITY latest-loc "http://docs.oasis-open.org/templates/DocBook/oasis-specification">
<!ENTITY pubdate "25 July 2013">
<!ENTITY title "XDI Signatures V&version;">
<!ENTITY % xinclude SYSTEM "/Applications/oxygen-13.2/frameworks/docbook/4.4/dtd/xinclude.mod">
%xinclude;
]>


<article status="&standard;">

  <articleinfo>
    <title>&title;</title>

    <releaseinfo role="cvs"> $Id: oasis-specification-0.6-wd04.xml,v 1.2 2012/06/14 01:57:23 admin
      Exp $ </releaseinfo>

    <productname>&name;</productname>
    <productnumber>&version;-&stage;</productnumber>
    <releaseinfo role="track">Standards Track Work Product</releaseinfo>

    <releaseinfo role="OASIS-specification-this-authoritative"
      >&this-loc;/&name;-&version;-&stage;.html</releaseinfo>
    <releaseinfo role="OASIS-specification-this"
      >&this-loc;/&name;-&version;-&stage;.pdf</releaseinfo>
    <releaseinfo role="OASIS-specification-this"
      >&this-loc;/&name;-&version;-&stage;.xml</releaseinfo>

    <releaseinfo role="OASIS-specification-previous-authoritative"
      >&previous-loc;/&name;-&pversion;.html</releaseinfo>
    <releaseinfo role="OASIS-specification-previous"
      >&previous-loc;/&name;-&pversion;.pdf</releaseinfo>
    <releaseinfo role="OASIS-specification-previous"
      >&previous-loc;/&name;-&pversion;.xml</releaseinfo>

    <releaseinfo role="OASIS-specification-latest-authoritative"
      >&latest-loc;/&name;.html</releaseinfo>
    <releaseinfo role="OASIS-specification-latest">&latest-loc;/&name;.pdf</releaseinfo>
    <releaseinfo role="OASIS-specification-latest">&latest-loc;/&name;.xml</releaseinfo>

    <releaseinfo role="committee"><ulink url="https://www.oasis-open.org/apps/org/workgroup/xdi/"
        >OASIS XRI Data Interchange (XDI) TC</ulink></releaseinfo>

    <authorgroup>
      <editor>
        <firstname>Peter</firstname>
        <surname>Davis</surname>
        <affiliation>
          <orgname>Neustar, Inc.</orgname>
        </affiliation>
        <email>peter.davis@neustar.biz</email>
      </editor>
      <editor>
        <firstname>Dan</firstname>
        <surname>Blum</surname>
        <affiliation>
          <orgname>Respect Network Corp.</orgname>
        </affiliation>
      </editor>
    </authorgroup>

    <pubdate>&pubdate;</pubdate>

    <copyright>
      <year>2014</year>
      <holder>OASIS Open, Inc. All Rights Reserved.</holder>
    </copyright>

    <legalnotice role="additional">
      <title>Additional artifacts</title>
      <para>This specification is one component of a suite of specifications which includes:</para>
      <itemizedlist spacing="compact">
        <listitem>
          <para/>
        </listitem>
      </itemizedlist>
    </legalnotice>

    <abstract>
      <title>Abstract</title>
      <para>This working draft describes an environment for writing and publishing an OASIS
        specification using DocBook XML. It is an internal OASIS support document and not the basis
        of an OASIS specification in and of itself.</para>
    </abstract>


    <legalnotice role="notices">
      <title>Notices</title>
      <para>Copyright &#169; OASIS&#174; Open 2012. All Rights Reserved. </para>
      <para>All capitalized terms in the following text have the meanings assigned to them in the
        OASIS Intellectual Property Rights Policy (the "OASIS IPR Policy"). The full Policy may be
        found at <ulink url="http://www.oasis-open.org/who/intellectualproperty.php"
          >http://www.oasis-open.org/who/intellectualproperty.php</ulink>.</para>
      <para>This document and translations of it may be copied and furnished to others, and
        derivative works that comment on or otherwise explain it or assist in its implementation may
        be prepared, copied, published, and distributed, in whole or in part, without restriction of
        any kind, provided that the above copyright notice and this section are included on all such
        copies and derivative works. However, this document itself may not be modified in any way,
        including by removing the copyright notice or references to OASIS, except as needed for the
        purpose of developing any document or deliverable produced by an OASIS Technical Committee
        (in which case the rules applicable to copyrights, as set forth in the OASIS IPR Policy,
        must be followed) or as required to translate it into languages other than English.</para>
      <para>The limited permissions granted above are perpetual and will not be revoked by OASIS or
        its successors or assigns.</para>
      <para>This document and the information contained herein is provided on an "AS IS" basis and
        OASIS DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY
        WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY OWNERSHIP RIGHTS OR
        ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.</para>
      <para>OASIS requests that any OASIS Party or any other party that believes it has patent
        claims that would necessarily be infringed by implementations of this OASIS Committee
        Specification or OASIS Standard, to notify OASIS TC Administrator and provide an indication
        of its willingness to grant patent licenses to such patent claims in a manner consistent
        with the IPR Mode of the OASIS Technical Committee that produced this specification.</para>
      <para>OASIS invites any party to contact the OASIS TC Administrator if it is aware of a claim
        of ownership of any patent claims that would necessarily be infringed by implementations of
        this specification by a patent holder that is not willing to provide a license to such
        patent claims in a manner consistent with the IPR Mode of the OASIS Technical Committee that
        produced this specification. OASIS may include such claims on its website, but disclaims any
        obligation to do so.</para>
      <para>OASIS takes no position regarding the validity or scope of any intellectual property or
        other rights that might be claimed to pertain to the implementation or use of the technology
        described in this document or the extent to which any license under such rights might or
        might not be available; neither does it represent that it has made any effort to identify
        any such rights. Information on OASIS' procedures with respect to rights in any document or
        deliverable produced by an OASIS Technical Committee can be found on the OASIS website.
        Copies of claims of rights made available for publication and any assurances of licenses to
        be made available, or the result of an attempt made to obtain a general license or
        permission for the use of such proprietary rights by implementers or users of this OASIS
        Committee Specification or OASIS Standard, can be obtained from the OASIS TC Administrator.
        OASIS makes no representation that any information or list of intellectual property rights
        will at any time be complete, or that any claims in such list are, in fact, Essential
        Claims.</para>
      <para>The name "OASIS" is a trademark of <ulink url="http://www.oasis-open.org">OASIS</ulink>,
        the owner and developer of this specification, and should be used only to refer to the
        organization and its official outputs. OASIS welcomes reference to, and implementation and
        use of, specifications, while reserving the right to enforce its marks against misleading
        uses. Please see <ulink url="http://www.oasis-open.org/who/trademark.php"
          >http://www.oasis-open.org/who/trademark.php</ulink> for above guidance.</para>
    </legalnotice>
  </articleinfo>

  <section id="s.intro">
    <title>Introduction</title>
    <para></para>
    <section>
      <title>Related Publications</title>
      <para>This &standard; is part of a broadre suite of specifications collectively referred to as XDI &version;. The following specifications constitute the complete suite:
      <itemizedlist>
        <listitem><para>XDI Core <xref linkend="XDICore"/></para></listitem>
      </itemizedlist>
      </para>
    </section>
    
    <section>
      <title>Terminology</title>
    </section>
      <section>
        <title>Key words</title>
        <para>The key words <glossterm>MUST</glossterm>, <glossterm>MUST NOT</glossterm>,
            <glossterm>REQUIRED</glossterm>, <glossterm>SHALL</glossterm>, <glossterm>SHALL NOT</glossterm>, <glossterm>SHOULD</glossterm>, <glossterm>SHOULD NOT</glossterm>,
            <glossterm>RECOMMENDED</glossterm>, <glossterm>MAY</glossterm>, and
            <glossterm>OPTIONAL</glossterm> are to be interpreted as described in <xref
            linkend="rfc2119"/>.</para>
      </section>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="../xdi-docbook-util/xdi-glossary-wd01.xml"/> <!-- import glossary -->
  </section>

  <section id="s.usage">
    <title>Usage</title>
    <para>XDI requests and responses SHOULD be signed, to ensure message integrity and authenticity. <xref linkend="XDISec"/> defines other mechanisms to achieve integrity and authenticity. This specification defines signatures that require SHA-256 or greater hashing, and allows for HMAC, RSA and ECDSA algorithms. In the future, additional hashing and encryption algorithms may be added.</para>
    <para>Signatures over sub-graphs are established in a manner such that the signature may be included in the graph.</para>
    <para>Recipients of signed XDI messages SHOULD validate all signatures present.</para>
  </section>

  <section>
    <title> Key Material Representations</title>
    <para>TBD</para>
  </section>
  
  <section>
    <title>Signature Metadata</title>
    <para>To construct the <glossterm>Signature Block</glossterm>, the following statements MUST be added to the <glossterm>Normalized Graph</glossterm>:
    </para>
    <orderedlist numeration="arabic">
      <listitem><para></para></listitem>
    </orderedlist>
  </section>
  <section>
    <title>Signature Processing Rules</title>
    <para></para>
    <section>
      <title>Canonical Representation</title>
      <para>Signing XDI messages involves first normalizing to the XdiFlatSerialization as defined in <xref linkend="XDICore"/>, and afterwards, incorporation of a <glossterm>Signature Block</glossterm> in a manner not disruptive to validators.</para>
      <para>XdiFlatSerialization is the only serialization format used for signature creation and validation. Implementations that choose to transfer XDI messages in another serialization format MUST serialize the message in XdiFlatSerialization prior to attempting validation.</para>
      <section>
        <title>Canonicalization Process</title>
        <para>The following steps MUST be performed in this order to produce the <glossterm>Normalized Graph</glossterm>. 
          These requirements apply to message senders as well as message recipients.</para>
        <para>
          <orderedlist numeration="arabic">
            <listitem><para>Ensure the sub-graph is UTF-8 encoded and formatted as defined in XdiFlatSerialization.</para></listitem>
            <listitem><para>All unquoted white space and new lines MUST be removed (TODO: better clarify white space. should this go into XdiFlatSerialization?)</para></listitem>
            <listitem><para>All JSON <xref linkend="rfc4627"/>keys in the unsigned graph MUST be sorted in UTF-8 byte-order.</para></listitem>
          </orderedlist>
        </para>
      </section>
    </section>
    <section>
      <title>Graph Signatures</title>
      <para></para>
    </section>
    <section>
      <title>Message Signatures</title>
      <para></para>
    </section>
  </section>
  <section>
    <title>Algorithms</title>
    <para></para>
  </section>
  <section>
    <title>Security Considerations</title>
    <para></para>
  </section>
  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="../xdi-docbook-util/xdi-biblio-wd01.xml"/> <!-- import biblio -->
<appendix>
  <title>Examples</title>
  <section>
    <title>Graph Signature Examples</title>
  </section>
  <section>
    <title>Message Signature Examples</title>
  </section>
</appendix>
</article>
